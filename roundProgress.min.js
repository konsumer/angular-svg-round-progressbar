/*! angular-svg-round-progressbar 2014-07-10 */
"use strict";angular.module("angular-svg-round-progress",[]).directive("roundProgress",["$timeout",function(a){if(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return{restrict:"EA",template:'<div class="round-progress"></div>',replace:!0};!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var b=function(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}},c=function(a,c,d,e,f,g){if(f){var a=a>=c?c-1e-5:a,h=g?180:359.9999,i=a/c*h,j=f/2,k=b(j,j,d,i),l=b(j,j,d,0),m=180>=i?"0":"1",n=["M",k.x,k.y,"A",d,d,0,m,0,l.x,l.y].join(" ");e.attr("d",n)}},d=function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b};return{restrict:"EA",scope:{current:"=",max:"=",semi:"=",radius:"@",color:"@",bgcolor:"@",stroke:"@"},link:function(b,e){var f,g,h=e.find("path"),i=e.find("circle"),j=function(){a(function(){var a=b.semi,c=b.radius,d=b.stroke;f=2*c+2*parseInt(d),e.attr({width:f,height:a?f/2:f}).css({overflow:"hidden"}),h.attr({stroke:b.color,"stroke-width":d,transform:a?"translate(0,"+f+") rotate(-90)":""}),i.attr({cx:c,cy:c,transform:"translate("+d+", "+d+")",r:c,stroke:b.bgcolor,"stroke-width":d}),k(b.current,b.current)})},k=function(a,e){if(!angular.isDefined(a))return!1;if(0>a)return g=e,b.current=0;if(a>b.max)return g=e,b.current=b.max;var i=b.max,j=b.radius,k=b.semi,l=e===a?0:e||0,m=a-l,n=0,o=50;angular.isNumber(g)&&(l=g,m=a-g,g=null),function p(){o>=n&&(c(d(n,l,m,o),i,j,h,f,k),requestAnimationFrame(p),n++)}()};b.$on("renderCircle",j),b.$watch("current",k),j()},replace:!0,template:'                <svg class="round-progress" xmlns="http://www.w3.org/2000/svg">                    <circle fill="none"/>                    <path fill="none" />                </svg>'}}]);